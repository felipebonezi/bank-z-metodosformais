A conta do cliente - seja ela individual ou conjunta - Ã© formada por um conjunto de movimentaÃ§Ãµes. Essas
movimentaÃ§Ãµes serÃ£o responsÃ¡veis por gerar o saldo da conta do cliente a partir do tipo de movimentaÃ§Ã£o,
ou seja, tipo crÃ©dito ou dÃ©bito. 

\begin{zed}
  [ Nome, Movimentacao ]
\end{zed}

\begin{zed}
  TipoMovimentacao ::= CREDITO | DEBITO
\end{zed}

AlÃ©m disso, a conta do cliente terÃ¡ um identificador para informar qual a modalidade da conta, ou seja,
se a conta Ã© do tipo "conta corrente" ou "conta poupanÃ§a". Dessa forma, o sistema poderÃ¡ tratar os casos
em que as operaÃ§Ãµes de saque, pagamentos e afins irÃ£o - ou nÃ£o - modificar ambos os saldos.

\begin{zed}
  TipoConta ::= CORRENTE | POUPANCA
\end{zed}

A conta pode ser de baixa automÃ¡tica ou de baixa manual. A primeira dÃ¡ a possibilidade de haver 
uma transiÃ§Ã£o automÃ¡tica, da poupanÃ§a para a conta corrente, caso o saldo da conta seja menor do que o dÃ©bito
que o usuÃ¡rio esteja tentando fazer naquele momento. A segunda opÃ§Ã£o nÃ£o possibilita transiÃ§Ã£o automÃ¡tica, 
caso o saldo da conta corrente seja menor do que a do dÃ©bito, que o usuÃ¡rio estÃ¡ tentando fazer no momento.

\begin{zed}
  Modalidade ::= BAIXA_AUTOMATICA | BAIXA_MANUAL
\end{zed}

Note que uma conta poderÃ¡ conter um cliente como dependente. Nesse caso, nosso schema de conta do cliente
deverÃ¡ conter uma Ãºnica entidade identificando tal cliente que estarÃ¡ contido na lista de clientes 
cadastrados no sistema.

\begin{schema}{ContaCorrente}
	tipo!: TipoConta\\
	movimentacoes: \power Movimentacao\\
	saldo: \power Movimentacao \pfun \nat\\
\where
	tipo! = CORRENTE\\
	saldo = \forall m: \power Movimentacao @ (c = \emptyset \implies saldo(c) = 0) 
							^ (c \neq \emptyset \implies \exists n:c @ f(c) = n.valor + saldo(c \setminus \{n\})\\
\end{schema}

\begin{schema}{ContaPoupanca}
	tipo!: TipoConta\\
	movimentacoes: \power Movimentacao\\
	saldo: \power Movimentacao \pfun N\\
\where
	tipo! = POUPANCA\\
	saldo = \forall m: \power Movimentacao @ (c = \emptyset \implies saldo(c) = 0) 
							\land (c \neq \emptyset \implies \exists n:c @ f(c) = n.valor + f(c \setminus \{n\})\\
\end{schema}

\begin{schema}{Conta}
	cc: ContaCorrente\\
	cp: ContaPoupanca\\
	modalidade: Modalidade\\
	titular: Cliente\\
	dependente: Cliente\\
\end{schema}

A movimentação da conta - seja ela poupança ou corrente - deverá conter um valor acima de zero, evitando
que a ambiguidade do tipo da movimentação aconteça, uma vez que toda movimentação terá seu tipo definido
em "Movimentação Débito" ou "Movimentação Crédito".

\begin{schema}{Movimentacao}
	tm: TipoMovimentacao\\
	valor: \nat
\where
	valor >= 0
\end{schema}

\begin{schema}{Cliente}
	nomeDoCliente: Nome\\
\end{schema}

\begin{schema}{Gerente}
	nome: Nome\\
\end{schema}

\begin{schema}{Banco}
	contas: Gerente \pfun Conta\\
\end{schema}
